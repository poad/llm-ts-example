import { test } from 'vitest';
import { stdout } from 'node:process';
import { PassThrough } from 'node:stream';
import { handle } from '../lambda/index.js';
function sleep(time) {
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve();
        }, time);
    });
}
const model = process.env.USE_MODEL ?? '';
const isDefinedModel = model.length > 0;
test.runIf(isDefinedModel)('test', { retry: 0 }, async () => {
    const output = process.env.DISABLE_STDOUT === 'true' ? new PassThrough() : stdout;
    const message = process.env.QUESTION && process.env.QUESTION.length > 0 ? process.env.QUESTION : 'あなたは誰？質問と同じ言語で答えてください。';
    await handle({ message, model }, output);
    await sleep(2000);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImluZGV4LnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUM5QixPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQ3RDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDMUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRTVDLFNBQVMsS0FBSyxDQUFDLElBQVk7SUFDekIsT0FBTyxJQUFJLE9BQU8sQ0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFO1FBQ25DLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZCxPQUFPLEVBQUUsQ0FBQztRQUNaLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNYLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQztBQUMxQyxNQUFNLGNBQWMsR0FBRyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUN4QyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxLQUFLLElBQUksRUFBRTtJQUUxRCxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNsRixNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsd0JBQXdCLENBQUM7SUFFMUgsTUFBTSxNQUFNLENBQUMsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDdkMsTUFBTSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDcEIsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0ZXN0IH0gZnJvbSAndml0ZXN0JztcbmltcG9ydCB7IHN0ZG91dCB9IGZyb20gJ25vZGU6cHJvY2Vzcyc7XG5pbXBvcnQgeyBQYXNzVGhyb3VnaCB9IGZyb20gJ25vZGU6c3RyZWFtJztcbmltcG9ydCB7IGhhbmRsZSB9IGZyb20gJy4uL2xhbWJkYS9pbmRleC5qcyc7XG5cbmZ1bmN0aW9uIHNsZWVwKHRpbWU6IG51bWJlcikge1xuICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9LCB0aW1lKTtcbiAgfSk7XG59XG5cbmNvbnN0IG1vZGVsID0gcHJvY2Vzcy5lbnYuVVNFX01PREVMID8/ICcnO1xuY29uc3QgaXNEZWZpbmVkTW9kZWwgPSBtb2RlbC5sZW5ndGggPiAwO1xudGVzdC5ydW5JZihpc0RlZmluZWRNb2RlbCkoJ3Rlc3QnLCB7IHJldHJ5OiAwIH0sIGFzeW5jICgpID0+IHtcblxuICBjb25zdCBvdXRwdXQgPSBwcm9jZXNzLmVudi5ESVNBQkxFX1NURE9VVCA9PT0gJ3RydWUnID8gbmV3IFBhc3NUaHJvdWdoKCkgOiBzdGRvdXQ7XG4gIGNvbnN0IG1lc3NhZ2UgPSBwcm9jZXNzLmVudi5RVUVTVElPTiAmJiBwcm9jZXNzLmVudi5RVUVTVElPTi5sZW5ndGggPiAwID8gcHJvY2Vzcy5lbnYuUVVFU1RJT04gOiAn44GC44Gq44Gf44Gv6Kqw77yf6LOq5ZWP44Go5ZCM44GY6KiA6Kqe44Gn562U44GI44Gm44GP44Gg44GV44GE44CCJztcblxuICBhd2FpdCBoYW5kbGUoe21lc3NhZ2UsIG1vZGVsfSwgb3V0cHV0KTtcbiAgYXdhaXQgc2xlZXAoMjAwMCk7XG59KTtcbiJdfQ==