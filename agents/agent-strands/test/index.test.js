import { test } from 'vitest';
import { stdout } from 'node:process';
import { PassThrough } from 'node:stream';
import { handle } from '../lambda/index.js';
function sleep(time) {
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve();
        }, time);
    });
}
const model = process.env.USE_MODEL ?? '';
const isDefinedModel = model.length > 0;
test.runIf(isDefinedModel)('test', { retry: 0 }, async () => {
    const output = process.env.DISABLE_STDOUT === 'true' ? new PassThrough() : stdout;
    const message = process.env.QUESTION && process.env.QUESTION.length > 0 ? process.env.QUESTION : 'あなたは誰？質問と同じ言語で答えてください。';
    await handle({ message, model }, output);
    await sleep(2000);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImluZGV4LnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUM5QixPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQ3RDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDMUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRTVDLFNBQVMsS0FBSyxDQUFDLElBQVksRUFBRTtJQUMzQixPQUFPLElBQUksT0FBTyxDQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQztRQUNwQyxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDZixPQUFPLEVBQUUsQ0FBQztRQUFBLENBQ1gsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUFBLENBQ1YsQ0FBQyxDQUFDO0FBQUEsQ0FDSjtBQUVELE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQztBQUMxQyxNQUFNLGNBQWMsR0FBRyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUN4QyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxLQUFLLElBQUksRUFBRSxDQUFDO0lBRTNELE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0lBQ2xGLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxvRUFBd0IsQ0FBQztJQUUxSCxNQUFNLE1BQU0sQ0FBQyxFQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxNQUFNLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUFBLENBQ25CLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRlc3QgfSBmcm9tICd2aXRlc3QnO1xuaW1wb3J0IHsgc3Rkb3V0IH0gZnJvbSAnbm9kZTpwcm9jZXNzJztcbmltcG9ydCB7IFBhc3NUaHJvdWdoIH0gZnJvbSAnbm9kZTpzdHJlYW0nO1xuaW1wb3J0IHsgaGFuZGxlIH0gZnJvbSAnLi4vbGFtYmRhL2luZGV4LmpzJztcblxuZnVuY3Rpb24gc2xlZXAodGltZTogbnVtYmVyKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH0sIHRpbWUpO1xuICB9KTtcbn1cblxuY29uc3QgbW9kZWwgPSBwcm9jZXNzLmVudi5VU0VfTU9ERUwgPz8gJyc7XG5jb25zdCBpc0RlZmluZWRNb2RlbCA9IG1vZGVsLmxlbmd0aCA+IDA7XG50ZXN0LnJ1bklmKGlzRGVmaW5lZE1vZGVsKSgndGVzdCcsIHsgcmV0cnk6IDAgfSwgYXN5bmMgKCkgPT4ge1xuXG4gIGNvbnN0IG91dHB1dCA9IHByb2Nlc3MuZW52LkRJU0FCTEVfU1RET1VUID09PSAndHJ1ZScgPyBuZXcgUGFzc1Rocm91Z2goKSA6IHN0ZG91dDtcbiAgY29uc3QgbWVzc2FnZSA9IHByb2Nlc3MuZW52LlFVRVNUSU9OICYmIHByb2Nlc3MuZW52LlFVRVNUSU9OLmxlbmd0aCA+IDAgPyBwcm9jZXNzLmVudi5RVUVTVElPTiA6ICfjgYLjgarjgZ/jga/oqrDvvJ/os6rllY/jgajlkIzjgZjoqIDoqp7jgafnrZTjgYjjgabjgY/jgaDjgZXjgYTjgIInO1xuXG4gIGF3YWl0IGhhbmRsZSh7bWVzc2FnZSwgbW9kZWx9LCBvdXRwdXQpO1xuICBhd2FpdCBzbGVlcCgyMDAwKTtcbn0pO1xuIl19